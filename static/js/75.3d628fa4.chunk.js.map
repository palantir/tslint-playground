{"version":3,"sources":["../node_modules/tslint/lib/rules/noThisAssignmentRule.js"],"names":["Object","defineProperty","exports","value","_a","_b","tslib_1","__webpack_require__","utils","ts","Lint","Rule","_super","apply","this","arguments","__extends","FAILURE_STRING_FACTORY_IDENTIFIERS","name","prototype","sourceFile","configOptions","allowedNames","allowDestructuring","options","ruleArguments","undefined","push","noThisAssignmentWalker","NoThisAssignmentWalker","ruleName","applyWithWalker","metadata","description","optionExamples","additionalProperties","properties","type","listType","optionsDescription","Utils","dedent","templateObject_1","__makeTemplateObject","rationale","templateObject_2","typescriptOnly","FAILURE_STRING_BINDINGS","Rules","AbstractRule","_this","allowedThisNameTesters","map","allowedThisName","RegExp","visitNode","node","isVariableDeclaration","visitVariableDeclaration","forEachChild","walk","initializer","kind","SyntaxKind","ThisKeyword","Identifier","variableNameIsBanned","text","addFailureAtNode","_i","length","test","AbstractWalker"],"mappings":"qDAiBAA,OAAAC,eAAAC,EAAA,cAA8CC,OAAA,IAC9C,IACAC,EAAAC,EADAC,EAAAC,EAAA,GAEAC,EAAAD,EAAA,KACAE,EAAAF,EAAA,IACAG,EAAAH,EAAA,MAcAI,EAAA,SAAAC,GAEA,SAAAD,IACA,cAAAC,KAAAC,MAAAC,KAAAC,YAAAD,KA0CA,OA5CAR,EAAAU,UAAAL,EAAAC,GAIAD,EAAAM,mCAAA,SAAAC,GACA,mEAAAA,EAAA,KAEAP,EAAAQ,UAAAN,MAAA,SAAAO,GACA,IApBAC,EACAC,EACAC,EAkBAC,GApBAH,EAoBAP,KAAAW,cAAA,GAnBAH,KACAC,GAAA,OACAG,IAAAL,IACAE,IAAAF,EANA,4BAOAK,IAAAL,EANA,kBAOAC,EAAAK,KAAAd,MAAAS,EAAAD,EAPA,oBAUYC,eAAAC,uBAYZK,EAAA,IAAAC,EAAAT,EAAAN,KAAAgB,SAAAN,GACA,OAAAV,KAAAiB,gBAAAH,IAEAjB,EAAAqB,UACAC,YAAA,8CACAC,iBACA,IAEA,GACA9B,KACAA,EAhCA,kBAgCA,UACAA,EAlCA,wBAkCA,EACAA,KAGAoB,SACAW,sBAAA,EACAC,YAAA/B,KACAA,EAzCA,wBA0CAgC,KAAA,WAEAhC,EA3CA,kBA4CAiC,SAAA,SACAD,KAAA,QAEAhC,GACAgC,KAAA,UAEAE,mBAAA7B,EAAA8B,MAAAC,OAAAC,MAAApC,EAAAqC,sBAAA,wLAAuR,+RAA8R,4FAnDrjB,sBACA,iBAmDAC,UAAAlC,EAAA8B,MAAAC,OAAAI,MAAAvC,EAAAqC,sBAAA,onBAAgsB,kqBAChsBb,SAAA,qBACAO,KAAA,gBACAS,gBAAA,GAEAnC,EAAAoC,wBAAA,qDACApC,EA7CA,CA8CCD,EAAAsC,MAAAC,cACD/C,EAAAS,OACA,IA2CA+B,EAAAG,EA3CAhB,EAAA,SAAAjB,GAEA,SAAAiB,IACA,IAAAqB,EAAA,OAAAtC,KAAAC,MAAAC,KAAAC,YAAAD,KAQA,OAPAoC,EAAAC,uBAAAD,EAAA1B,QAAAF,aAAA8B,IAAA,SAAAC,GAAkG,WAAAC,OAAAD,KAClGH,EAAAK,UAAA,SAAAC,GACAhD,EAAAiD,sBAAAD,IACAN,EAAAQ,yBAAAF,GAEA/C,EAAAkD,aAAAH,EAAAN,EAAAK,YAEAL,EA8BA,OAxCA5C,EAAAU,UAAAa,EAAAjB,GAYAiB,EAAAV,UAAAyC,KAAA,SAAAxC,GACAX,EAAAkD,aAAAvC,EAAAN,KAAAyC,YAEA1B,EAAAV,UAAAuC,yBAAA,SAAAF,GACA,QAAA9B,IAAA8B,EAAAK,aAAAL,EAAAK,YAAAC,OAAArD,EAAAsD,WAAAC,YAGA,OAAAR,EAAAtC,KAAA4C,MACA,KAAArD,EAAAsD,WAAAE,WACAnD,KAAAoD,qBAAAV,EAAAtC,KAAAiD,OACArD,KAAAsD,iBAAAZ,EAAA7C,EAAAM,mCAAAuC,EAAAtC,KAAAiD,OAEA,MACA,QACArD,KAAAU,QAAAD,oBACAT,KAAAsD,iBAAAZ,EAAA7C,EAAAoC,2BAIAlB,EAAAV,UAAA+C,qBAAA,SAAAhD,GACA,QAAAmD,EAAA,EAAAjE,EAAAU,KAAAqC,uBAA0DkB,EAAAjE,EAAAkE,OAAgBD,IAAA,CAE1E,GADAjE,EAAAiE,GACAE,KAAArD,GACA,SAGA,UAEAW,EAzCA,CA0CCnB,EAAA8D","file":"static/js/75.3d628fa4.chunk.js","sourcesContent":["\"use strict\";\n/**\n * @license\n * Copyright 2017 Palantir Technologies, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar _a, _b;\nvar utils = require(\"tsutils\");\nvar ts = require(\"typescript\");\nvar Lint = require(\"../index\");\nvar ALLOW_THIS_DESTRUCTURING = \"allow-destructuring\";\nvar ALLOWED_THIS_NAMES = \"allowed-names\";\nvar parseConfigOptions = function (configOptions) {\n    var allowedNames = [];\n    var allowDestructuring = false;\n    if (configOptions !== undefined) {\n        allowDestructuring = !!configOptions[ALLOW_THIS_DESTRUCTURING];\n        if (configOptions[ALLOWED_THIS_NAMES] !== undefined) {\n            allowedNames.push.apply(allowedNames, configOptions[ALLOWED_THIS_NAMES]);\n        }\n    }\n    return { allowedNames: allowedNames, allowDestructuring: allowDestructuring };\n};\nvar Rule = /** @class */ (function (_super) {\n    tslib_1.__extends(Rule, _super);\n    function Rule() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Rule.FAILURE_STRING_FACTORY_IDENTIFIERS = function (name) {\n        return \"Assigning `this` reference to local variable not allowed: \" + name + \".\";\n    };\n    Rule.prototype.apply = function (sourceFile) {\n        var options = parseConfigOptions(this.ruleArguments[0]);\n        var noThisAssignmentWalker = new NoThisAssignmentWalker(sourceFile, this.ruleName, options);\n        return this.applyWithWalker(noThisAssignmentWalker);\n    };\n    Rule.metadata = {\n        description: \"Disallows unnecessary references to `this`.\",\n        optionExamples: [\n            true,\n            [\n                true,\n                (_a = {},\n                    _a[ALLOWED_THIS_NAMES] = [\"^self$\"],\n                    _a[ALLOW_THIS_DESTRUCTURING] = true,\n                    _a),\n            ],\n        ],\n        options: {\n            additionalProperties: false,\n            properties: (_b = {},\n                _b[ALLOW_THIS_DESTRUCTURING] = {\n                    type: \"boolean\",\n                },\n                _b[ALLOWED_THIS_NAMES] = {\n                    listType: \"string\",\n                    type: \"list\",\n                },\n                _b),\n            type: \"object\",\n        },\n        optionsDescription: Lint.Utils.dedent(templateObject_1 || (templateObject_1 = tslib_1.__makeTemplateObject([\"\\n            Two options may be provided on an object:\\n\\n            * `\", \"` allows using destructuring to access members of `this` (e.g. `{ foo, bar } = this;`).\\n            * `\", \"` may be specified as a list of regular expressions to match allowed variable names.\"], [\"\\n            Two options may be provided on an object:\\n\\n            * \\\\`\", \"\\\\` allows using destructuring to access members of \\\\`this\\\\` (e.g. \\\\`{ foo, bar } = this;\\\\`).\\n            * \\\\`\", \"\\\\` may be specified as a list of regular expressions to match allowed variable names.\"])), ALLOW_THIS_DESTRUCTURING, ALLOWED_THIS_NAMES),\n        rationale: Lint.Utils.dedent(templateObject_2 || (templateObject_2 = tslib_1.__makeTemplateObject([\"\\n            Assigning a variable to `this` instead of properly using arrow lambdas may be a symptom of pre-ES6 practices\\n            or not managing scope well.\\n\\n            Instead of storing a reference to `this` and using it inside a `function () {`:\\n\\n            ```\\n            const self = this;\\n\\n            setTimeout(function () {\\n                self.doWork();\\n            });\\n            ```\\n\\n            Use `() =>` arrow lambdas, as they preserve `this` scope for you:\\n\\n            ```\\n            setTimeout(() => {\\n                this.doWork();\\n            });\\n            ```\\n        \"], [\"\\n            Assigning a variable to \\\\`this\\\\` instead of properly using arrow lambdas may be a symptom of pre-ES6 practices\\n            or not managing scope well.\\n\\n            Instead of storing a reference to \\\\`this\\\\` and using it inside a \\\\`function () {\\\\`:\\n\\n            \\\\`\\\\`\\\\`\\n            const self = this;\\n\\n            setTimeout(function () {\\n                self.doWork();\\n            });\\n            \\\\`\\\\`\\\\`\\n\\n            Use \\\\`() =>\\\\` arrow lambdas, as they preserve \\\\`this\\\\` scope for you:\\n\\n            \\\\`\\\\`\\\\`\\n            setTimeout(() => {\\n                this.doWork();\\n            });\\n            \\\\`\\\\`\\\\`\\n        \"]))),\n        ruleName: \"no-this-assignment\",\n        type: \"functionality\",\n        typescriptOnly: false,\n    };\n    Rule.FAILURE_STRING_BINDINGS = \"Don't assign members of `this` to local variables.\";\n    return Rule;\n}(Lint.Rules.AbstractRule));\nexports.Rule = Rule;\nvar NoThisAssignmentWalker = /** @class */ (function (_super) {\n    tslib_1.__extends(NoThisAssignmentWalker, _super);\n    function NoThisAssignmentWalker() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allowedThisNameTesters = _this.options.allowedNames.map(function (allowedThisName) { return new RegExp(allowedThisName); });\n        _this.visitNode = function (node) {\n            if (utils.isVariableDeclaration(node)) {\n                _this.visitVariableDeclaration(node);\n            }\n            ts.forEachChild(node, _this.visitNode);\n        };\n        return _this;\n    }\n    NoThisAssignmentWalker.prototype.walk = function (sourceFile) {\n        ts.forEachChild(sourceFile, this.visitNode);\n    };\n    NoThisAssignmentWalker.prototype.visitVariableDeclaration = function (node) {\n        if (node.initializer === undefined || node.initializer.kind !== ts.SyntaxKind.ThisKeyword) {\n            return;\n        }\n        switch (node.name.kind) {\n            case ts.SyntaxKind.Identifier:\n                if (this.variableNameIsBanned(node.name.text)) {\n                    this.addFailureAtNode(node, Rule.FAILURE_STRING_FACTORY_IDENTIFIERS(node.name.text));\n                }\n                break;\n            default:\n                if (!this.options.allowDestructuring) {\n                    this.addFailureAtNode(node, Rule.FAILURE_STRING_BINDINGS);\n                }\n        }\n    };\n    NoThisAssignmentWalker.prototype.variableNameIsBanned = function (name) {\n        for (var _i = 0, _a = this.allowedThisNameTesters; _i < _a.length; _i++) {\n            var tester = _a[_i];\n            if (tester.test(name)) {\n                return false;\n            }\n        }\n        return true;\n    };\n    return NoThisAssignmentWalker;\n}(Lint.AbstractWalker));\nvar templateObject_1, templateObject_2;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/tslint/lib/rules/noThisAssignmentRule.js\n// module id = 2100\n// module chunks = 75"],"sourceRoot":""}